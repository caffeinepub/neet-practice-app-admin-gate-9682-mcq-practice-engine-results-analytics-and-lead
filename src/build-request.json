{
  "kind": "build_request",
  "title": "Persist answers across question navigation and add subject-wise + overall student rankings",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the practice question flow so that when a student submits an answer and moves (slides) to the next question, the previously selected answer is retained for that question and is available at the end of the session for review (including when navigating back to previous questions using the question navigator).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "All feature are good but when some one click answer and it shows answer and it slide to another question keep old answer save at end at one can see subject wise ranking of all students and overall ranking"
        ]
      },
      "acceptanceCriteria": [
        "After answering Question N and moving to Question N+1, returning to Question N shows the same selected option as previously chosen.",
        "The list of attempts shown at the end of the session includes answers for all questions that were answered during the session (not only the last question).",
        "Answer persistence works even if the student navigates using the Jump-to-Question navigator before finishing the session."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement an end-of-session results/review experience that displays the student’s saved answers for the completed session (question-by-question) using authoritative data from the backend test result created on submission.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "keep old answer save at end"
        ]
      },
      "acceptanceCriteria": [
        "Backend exposes a query to retrieve a submitted test result by resultId with authorization that prevents other users from reading someone else’s result.",
        "Results page displays a real score breakdown derived from the stored attempts (correct/incorrect counts, accuracy, and per-question review showing chosen option vs correct option).",
        "Results page renders without placeholder text about missing backend support."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add subject-wise ranking and overall ranking of all students. Overall ranking should continue to work as a global leaderboard, and subject-wise ranking should rank students using subject-specific performance aggregated from submitted test results.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "subject wise ranking of all students and overall ranking"
        ]
      },
      "acceptanceCriteria": [
        "Backend provides a query for a subject-specific leaderboard (for physics, chemistry, biology) that returns a sorted ranking comparable to the overall leaderboard.",
        "Rankings UI allows switching between Overall and a selected Subject leaderboard, and displays a ranked table of students for the chosen scope.",
        "Overall leaderboard remains available and unchanged in meaning (global)."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo (no additional canisters/services).",
    "Do not edit files under frontend/src/components/ui (compose existing UI components instead).",
    "Do not modify immutable frontend hook files: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx."
  ],
  "nonGoals": [
    "Add real-time/live updating rankings (no websockets or push).",
    "Add third-party authentication providers (only Internet Identity is supported).",
    "Introduce external databases or off-chain storage."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}