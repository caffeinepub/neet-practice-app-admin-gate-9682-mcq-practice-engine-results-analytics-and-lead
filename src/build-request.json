{
  "kind": "build_request",
  "title": "Remove PDF upload, keep existing questions across updates, and fix student question open error",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Remove the PDF upload/import section from Contributor mode and revert the Contributor UI to manual question creation/editing only (no PDF upload button, no PDF import tabs/mode, no extracted preview list, and no bulk-save flow).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "Remove this pdf upload section make it like It was before"
        ]
      },
      "acceptanceCriteria": [
        "Contributor page no longer renders any PDF upload controls (including file input, PDF import mode toggle/tabs, or PdfImportPreviewList).",
        "Contributor page still supports manual question creation, editing, and deletion exactly as before (no broken imports or runtime errors).",
        "No user-facing text about PDF import remains in Contributor mode."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Fix the backend bulk question creation logic so that newly created question IDs returned by the bulk-create endpoint correspond exactly to the IDs actually stored in the questions map (preventing downstream 'question not found' / mismatch errors when opening questions).",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "And when I open question it show something went wrong please resolve it"
        ]
      },
      "acceptanceCriteria": [
        "When calling the bulk-create method, every returned ID maps to an existing question retrievable by chapter/year queries.",
        "Opening questions that were created via any creation path does not fail due to missing/incorrect IDs."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure the Student/Practice question view never shows the global “Something went wrong” error due to missing questions or invalid indices/IDs; instead, handle these cases gracefully with an English, user-friendly empty/error state and safe navigation back to selection pages.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "when I open question in student section it shows something went wrong"
        ]
      },
      "acceptanceCriteria": [
        "If the selected chapter/year/category returns zero questions, the Practice page shows an in-page alert (not the global error screen) and provides a working back navigation action.",
        "If a stored progress index points past the available questions length, the Practice page clamps safely (no crash).",
        "No render-time exceptions occur in Practice flow when a question referenced in local/server progress cannot be found; the UI stays usable and instructs the user to restart or go back."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Ensure that future deployments/upgrades do not delete previously created questions (and related core data like chapters) by preserving actor state across upgrades; update/introduce migration/upgrade handling as needed under the project’s conditional migration policy.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "on further updates don't delete old questions"
        ]
      },
      "acceptanceCriteria": [
        "After an upgrade, chapters and questions created before the upgrade are still present and returned by list/get queries.",
        "ID counters (e.g., nextQuestionId) continue from the correct next value after an upgrade (no overwrites/collisions).",
        "If migration logic is required due to any data-shape change, it is applied without dropping existing records."
      ]
    },
    {
      "id": "REQ-5",
      "text": "Show only the questions the user/admin has added (i.e., do not display any PDF-import/extracted question set in Student views), aligned with the removal of PDF import; ensure question listing in student flows is based only on the persisted question set and does not include any transient extracted preview data.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "show only those question which I added"
        ]
      },
      "acceptanceCriteria": [
        "Student flows (chapter/year practice) source questions only from backend queries and never from any PDF-extraction preview state.",
        "If any PDF-import-specific path previously caused questions to appear unexpectedly in Student mode, it is removed/disabled so only the intended persisted questions are shown."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo (no additional backend services).",
    "Frontend files under frontend/src/components/ui and the listed immutable hook/entry paths must not be edited; compose them instead.",
    "Use English for all user-facing text."
  ],
  "nonGoals": [
    "Improving PDF parsing fidelity, figures/symbol extraction, or PDF solution mapping.",
    "Adding new authentication methods beyond Internet Identity.",
    "Adding real-time features (WebSockets/chat/notifications)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}