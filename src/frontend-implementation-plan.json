{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Remove PDF import from Contributor mode and harden Practice flow against missing questions",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Remove PDF upload/import UI and bulk-save flow from Contributor mode, leaving only manual question creation/editing/deletion.",
      "acceptanceCriteria": [
        "Contributor page no longer renders any PDF upload controls (including file input, PDF import mode toggle/tabs, or PdfImportPreviewList).",
        "Contributor page still supports manual question creation, editing, and deletion exactly as before (no broken imports or runtime errors).",
        "No user-facing text about PDF import remains in Contributor mode."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ContributorPage.tsx",
          "operation": "modify",
          "description": "Remove all PDF-import-related state, handlers, UI (tabs/mode toggles, file input/button), extracted preview rendering, and bulk-save wiring; ensure manual question CRUD UI remains intact and the page compiles without PdfImportPreviewList/pdfToQuestions imports."
        },
        {
          "path": "frontend/src/components/contributor/PdfImportPreviewList.tsx",
          "operation": "delete",
          "description": "Remove the PdfImportPreviewList component since PDF import is no longer supported in Contributor mode."
        },
        {
          "path": "frontend/src/utils/pdf/pdfjsClient.ts",
          "operation": "delete",
          "description": "Remove PDF.js client utilities since PDF import is no longer supported in the app."
        },
        {
          "path": "frontend/src/utils/pdf/pdfSolutionMapping.ts",
          "operation": "delete",
          "description": "Remove PDF solution mapping utilities since PDF import is no longer supported in the app."
        },
        {
          "path": "frontend/src/utils/pdf/pdfTextReconstruction.ts",
          "operation": "delete",
          "description": "Remove PDF text reconstruction utilities since PDF import is no longer supported in the app."
        },
        {
          "path": "frontend/src/utils/pdf/pdfToQuestions.ts",
          "operation": "delete",
          "description": "Remove PDF-to-questions extraction logic since PDF import is no longer supported in the app."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Prevent Practice flow crashes and global error screens by handling empty question sets, invalid indices, and missing question references with a friendly in-page state and safe navigation.",
      "acceptanceCriteria": [
        "If the selected chapter/year/category returns zero questions, the Practice page shows an in-page alert (not the global error screen) and provides a working back navigation action.",
        "If a stored progress index points past the available questions length, the Practice page clamps safely (no crash).",
        "No render-time exceptions occur in Practice flow when a question referenced in local/server progress cannot be found; the UI stays usable and instructs the user to restart or go back."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/PracticePage.tsx",
          "operation": "modify",
          "description": "Add defensive guards to avoid rendering with an undefined current question (e.g., clamp currentQuestionIndex whenever questions change, and show a friendly in-page error/empty state with working navigation back to the chapter category selection); ensure submission logic handles missing question lookups without runtime errors and provides a restart/go-back action in English."
        },
        {
          "path": "frontend/src/utils/practiceProgressStorage.ts",
          "operation": "modify",
          "description": "Add a small utility to clear/reset stored anonymous practice progress for a given (subject/chapter/category/year) key, so PracticePage can offer a safe 'Restart' action when local progress is invalid."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Ensure Student flows only display persisted questions from backend queries and never include any PDF-import transient preview data.",
      "acceptanceCriteria": [
        "Student flows (chapter/year practice) source questions only from backend queries and never from any PDF-extraction preview state.",
        "If any PDF-import-specific path previously caused questions to appear unexpectedly in Student mode, it is removed/disabled so only the intended persisted questions are shown."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/PracticePage.tsx",
          "operation": "modify",
          "description": "Confirm PracticePage continues to derive its question list exclusively from backend queries (chapter/year queries) and remove/avoid any reliance on PDF-extraction/transient state; keep all user-facing text in English."
        },
        {
          "path": "frontend/src/pages/ChapterCategorySelectPage.tsx",
          "operation": "modify",
          "description": "Ensure category availability and year selection are computed only from chapter questions fetched from the backend, with no references to any PDF-import/extracted preview data."
        }
      ]
    }
  ]
}